<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Daily Workout Generator</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card {
      background: white;
      padding: 24px 24px;
      border-radius: 16px;
      width: 90vw;
      height: 90vh;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      display: flex;
      flex-direction: column;
    }

    h1 {
      font-size: 4em;
      text-align: center;
      margin-bottom: 12px;
    }

    .date {
      text-align: center;
      color: #666;
      font-size: 2em;
      margin-bottom: 16px;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      flex-grow: 1;
      overflow-y: auto;
      display:flex;
      flex-direction: column;
    }

    li {
      padding: 14px 10%;
      margin-bottom: 10px;
      border-radius: 12px;
      background: #eef1f5;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 3em;
      flex-grow:1;
    }

    .group {
      font-size: 1em;
      color: #555;
      background: #dfe5ec;
      padding: 4px 10px;
      border-radius: 12px;
      text-transform: capitalize;
    }
  </style>
  <link rel="manifest" href="manifest.webmanifest" />
</head>
<body>

<div class="card">
  <h1>Today's Workout</h1>
  <div class="date" id="date"></div>
  <ul id="workoutList"></ul>
</div>

<script>
  // -------------------------
  // Seeded random generator
  // -------------------------
  function mulberry32(seed) {
    return function () {
      let t = seed += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
    };
  }

  // Seed = today's date (YYYYMMDD)
  const today = new Date();
  const seed =
    today.getFullYear() * 10000 +
    (today.getMonth() + 1) * 100 +
    today.getDate();

  const rand = mulberry32(seed);

  // -------------------------
  // Exercises
  // -------------------------
  const exercises = {
    legs: [
      "Squat", "Split squats", "Lunge",
      "Hip thrust", "Leg extension",
      "Leg curl", "Calf raises"
    ],
    shoulder: ["Shoulder press", "Lateral raises", "Flies"],
    chest: ["Incline bench", "Bench", "Dips"],
    back: ["Seated rows", "Standing rows", "Pull down machine", "Superman"],
    arms: ["Bicep curl bar", "Bicep curl dumbbell", "Tricep pulldown", "Tricep pushup"],
    wrist: ["Wrist curl"],
    abs: ["Situp", "Ball throwing", "L sit", "Plank"]
  };

  // -------------------------
  // Utilities (seeded)
  // -------------------------
  function shuffle(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(rand() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function pickOne(arr) {
    return arr[Math.floor(rand() * arr.length)];
  }

  function pickMany(arr, n) {
    return shuffle(arr).slice(0, n);
  }

  // Lookup: exercise â†’ group
  const exerciseToGroup = {};
  Object.entries(exercises).forEach(([group, list]) => {
    list.forEach(ex => exerciseToGroup[ex] = group);
  });

  function hasAdjacentSameGroup(list) {
    for (let i = 1; i < list.length; i++) {
      if (exerciseToGroup[list[i]] === exerciseToGroup[list[i - 1]]) {
        return true;
      }
    }
    return false;
  }

  // -------------------------
  // Workout generation
  // -------------------------
  function generateWorkout() {
    const legs = pickMany(exercises.legs, 3);
    const wrist = pickOne(exercises.wrist);
    const abs = pickOne(exercises.abs);

    const optionalPool = [
      ...exercises.shoulder,
      ...exercises.chest,
      ...exercises.back,
      ...exercises.arms
    ];

    const optional = pickMany(optionalPool, 2);

    const base = [...legs, wrist, abs, ...optional];

    let ordered;
    do {
      ordered = shuffle(base);
    } while (hasAdjacentSameGroup(ordered));

    return ordered;
  }

  // -------------------------
  // Render
  // -------------------------
  document.getElementById("date").textContent =
    today.toLocaleDateString(undefined, {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric"
    });

  const workout = ["Bicep", "Tricep", "Bench", "Pull down", "Shoulder press", "Rows", "Abs"]//generateWorkout();
  const list = document.getElementById("workoutList");

  workout.forEach(exercise => {
    const li = document.createElement("li");

    const name = document.createElement("span");
    name.textContent = exercise;

    const group = document.createElement("span");
    group.className = "group";
    group.textContent = exerciseToGroup[exercise];

    li.appendChild(name);
    li.appendChild(group);
    list.appendChild(li);
  });
</script>

</body>
</html>
